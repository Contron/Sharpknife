<UserControl x:Name="Control" x:Class="Sharpknife.Desktop.Views.Controls.StatusBox" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:sdc="clr-namespace:Sharpknife.Desktop.Converters">
    <UserControl.Resources>
        <sdc:BoolVisibilityConverter x:Key="BoolVisibilityConverter" />
    </UserControl.Resources>
    <StatusBar>
        <StatusBarItem HorizontalAlignment="Left">
            <TextBlock Text="{Binding ElementName=Control, Path=Status.Message, FallbackValue=Message}" />
        </StatusBarItem>
        <StatusBarItem HorizontalAlignment="Right">
            <StackPanel Orientation="Horizontal">
                <ItemsControl ItemsSource="{Binding ElementName=Control, Path=Children}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>
                <ProgressBar Visibility="{Binding Converter={StaticResource BoolVisibilityConverter}, ElementName=Control, Path=Status.Busy}" IsIndeterminate="True" Width="100" Height="10" Margin="10, 0, 0, 0" />
            </StackPanel>
        </StatusBarItem>
    </StatusBar>
</UserControl>
